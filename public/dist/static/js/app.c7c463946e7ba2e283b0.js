webpackJsonp([1],{"4yvC":function(e,s){},"65UA":function(e,s,t){e.exports=t.p+"static/img/profile.8b1dbb1.png"},"6ocg":function(e,s){},"8+oQ":function(e,s){},"9wNP":function(e,s){},Ib1g:function(e,s){},M83e:function(e,s){},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={};t.d(n,"isAuthenticated",function(){return T}),t.d(n,"getMe",function(){return B}),t.d(n,"getRequests",function(){return L});var a={};t.d(a,"signUp",function(){return Z}),t.d(a,"signIn",function(){return Y}),t.d(a,"signOut",function(){return ee}),t.d(a,"authenticateUser",function(){return se}),t.d(a,"getRequests",function(){return te});var r={};t.d(r,"storeMe",function(){return ne}),t.d(r,"clearMe",function(){return ae}),t.d(r,"storeRequests",function(){return re});var i={};t.d(i,"getUsers",function(){return oe}),t.d(i,"getUser",function(){return ce});var o={};t.d(o,"getUsers",function(){return me}),t.d(o,"getUser",function(){return fe}),t.d(o,"searchUsers",function(){return ve}),t.d(o,"sendRequest",function(){return he}),t.d(o,"acceptRequest",function(){return pe}),t.d(o,"unseenRequest",function(){return ge}),t.d(o,"markRequestAsSeen",function(){return _e});var c={};t.d(c,"storeUsers",function(){return Ce}),t.d(c,"storeUser",function(){return we}),t.d(c,"clearUsers",function(){return je});var u={};t.d(u,"getConversations",function(){return qe}),t.d(u,"getChat",function(){return Ue});var l={};t.d(l,"getConversations",function(){return ye}),t.d(l,"getChat",function(){return ke}),t.d(l,"sendMessage",function(){return xe}),t.d(l,"markMessagesAsSeen",function(){return Re}),t.d(l,"subscribe",function(){return Me}),t.d(l,"bind",function(){return Ee});var d={};t.d(d,"storeConversations",function(){return Fe}),t.d(d,"storeUnseenCount",function(){return Oe}),t.d(d,"pushMessage",function(){return Pe}),t.d(d,"storeChat",function(){return Ne}),t.d(d,"addMessage",function(){return Ae}),t.d(d,"clearChat",function(){return ze}),t.d(d,"clearConversations",function(){return Se});var m=t("7+uW"),f=t("//Fk"),v=t.n(f),h=t("mtWM"),p=t.n(h);p.a.interceptors.request.use(function(e){return e},function(e){return v.a.reject(e)}),p.a.interceptors.response.use(function(e){return e},function(e){return v.a.reject(e)});var g={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var _=t("VU/8")({name:"App"},g,!1,function(e){t("U+nL")},null,null).exports,C=t("/ocq"),w=t("Dd8w"),j=t.n(w),b=t("NYxO"),q={name:"Signup",data:function(){return{name:null,email:null,password:null,signedIn:null}},methods:j()({},Object(b.b)({signUp:"signUp"}),{create:function(){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.signUp({name:e.name,email:e.email,password:e.password}),!0})}})},U={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"signup_container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8 offset-2"},[t("div",{staticClass:"card"},[e._m(0),e._v(" "),t("div",{staticClass:"card-block"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-10 offset-1"},[t("form",{attrs:{method:"post"},on:{submit:function(s){s.preventDefault(),e.create(s)}}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"name"}},[e._v("Name")]),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"},{name:"validate",rawName:"v-validate",value:"required|min:2|max:20",expression:"'required|min:2|max:20'"}],staticClass:"form-control form-control-sm",class:{name:!0,"is-invalid":e.errors.has("name")},attrs:{type:"text",id:"name",name:"name",placeholder:"Enter name"},domProps:{value:e.name},on:{input:function(s){s.target.composing||(e.name=s.target.value)}}}),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.first("name")))])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"email"}},[e._v("Email")]),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|email|unique",expression:"'required|email|unique'"}],staticClass:"form-control form-control-sm",class:{email:!0,"is-invalid":e.errors.has("email")},attrs:{type:"email",id:"email",name:"email",placeholder:"Enter email address"},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}}),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.first("email")))])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"password"}},[e._v("Password")]),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:6|max:20|confirmed",expression:"'required|min:6|max:20|confirmed'"}],staticClass:"form-control form-control-sm",class:{password:!0,"is-invalid":e.errors.has("password")},attrs:{type:"password",id:"password",name:"password",placeholder:"Enter password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.first("password")))])])]),e._v(" "),e._m(1),e._v(" "),e._m(2)])])])])])])])])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"offset-1"},[this._v("\n                            Sign Up\n                        ")])])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"password_confirmation"}},[this._v("Password")]),this._v(" "),s("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[s("input",{staticClass:"form-control form-control-sm",attrs:{type:"password",id:"password_confirmation",name:"password_confirmation",placeholder:"Confirm password"}})])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-10 offset-sm-0 offset-md-0 offset-md-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("SignUp")]),this._v(" "),s("a",{staticClass:"btn btn-link",attrs:{href:"/#/signin"}},[this._v("Already have an account")])])])}]};var y=t("VU/8")(q,U,!1,function(e){t("8+oQ")},null,null).exports,k={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"warning_container"},[s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[this._v("\n        "+this._s(this.message)+"\n    ")])])},staticRenderFns:[]},x={name:"Signin",components:{Warning:t("VU/8")({name:"Warning",props:["message"]},k,!1,null,null,null).exports},data:function(){return{email:null,password:null,error:null}},methods:j()({},Object(b.b)({signIn:"signIn"}),{submit:function(){var e=this;this.$validator.validateAll().then(function(s){if(s)return e.signIn({email:e.email,password:e.password}).catch(function(s){e.error="The email or password you entered did not match our records."}),!0})}})},R={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"signin_container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8 offset-2"},[e.error?t("warning",{attrs:{message:e.error}}):e._e(),e._v(" "),t("div",{staticClass:"card"},[e._m(0),e._v(" "),t("div",{staticClass:"card-block"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-10 offset-1"},[t("form",{attrs:{method:"post"},on:{submit:function(s){s.preventDefault(),e.submit(s)}}},[t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"email"}},[e._v("Email")]),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control form-control-sm",class:{email:!0,"is-invalid":e.errors.has("email")},attrs:{type:"email",id:"email",name:"email",placeholder:"Enter email address"},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}}),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.first("email")))])])]),e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-form-label",attrs:{for:"password"}},[e._v("Password")]),e._v(" "),t("div",{staticClass:"col-sm-9 col-md-9 col-lg-9"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control form-control-sm",class:{password:!0,"is-invalid":e.errors.has("password")},attrs:{type:"password",id:"password",name:"password",placeholder:"Enter password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),t("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"help is-danger"},[e._v(e._s(e.errors.first("password")))])])]),e._v(" "),e._m(1)])])])])])],1)])])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"row"},[s("div",{staticClass:"offset-1"},[this._v("\n                            Sign In\n                        ")])])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"form-group row"},[s("div",{staticClass:"col-sm-8 offset-sm-0 offset-md-3"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("SignIn")]),this._v(" "),s("a",{staticClass:"btn btn-link",attrs:{href:"/#/signup"}},[this._v("Create account")])])])}]};var M=t("VU/8")(x,R,!1,function(e){t("TXCK")},null,null).exports,E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"404_container"},[s("h1",[this._v("404")])])}]};var F=t("VU/8")({name:"NotFound"},E,!1,function(e){t("VAl4")},"data-v-2e0abff4",null).exports,O=new m.a,P={name:"Me",methods:j()({},Object(b.b)({signOut:"signOut"}),{openMyProfile:function(){O.$emit("open-profile",!0)}}),computed:j()({},Object(b.c)({me:"getMe"}))},N={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"me-container"},[n("div",{staticClass:"me-right"},[n("img",{staticClass:"me-img",attrs:{src:t("65UA")}}),e._v(" "),n("p",{staticClass:"me-name"},[e._v(e._s(e.me.name))]),e._v(" "),n("a",{staticClass:"me-link",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.openMyProfile(s)}}},[n("span",{staticClass:"me-link-span"})])]),e._v(" "),n("a",{staticClass:"me-signout",attrs:{href:"#",title:"Sign Out"},on:{click:e.signOut}},[e._v("✖")])])},staticRenderFns:[]};var A=t("VU/8")(P,N,!1,function(e){t("sM6+")},null,null).exports,z=t("bOdI"),S=t.n(z),I={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"user-container"},[n("img",{staticClass:"user-img",attrs:{src:t("65UA")}}),e._v(" "),n("p",{staticClass:"user-name"},[e._v(e._s(e.name))]),e._v(" "),n("a",{staticClass:"user-link",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.chat(s)}}},[n("span",{staticClass:"user-link-span"})])])},staticRenderFns:[]};var V,$=(V={name:"Users",data:function(){return{query:null}},components:{user:t("VU/8")({name:"User",props:["name","chat"]},I,!1,function(e){t("SZ0s")},null,null).exports},methods:j()({},Object(b.b)({getUsers:"getUsers",getUser:"getUser",getChat:"getChat",getRequests:"getRequests",searchUsers:"searchUsers"}),Object(b.d)({clearChat:"clearChat"}),Object(b.d)({storeUser:"storeUser"}),{chat:function(e){this.getUser({user_one:this.me.id,user_two:e._id}),this.findChat(e)},autoComplete:function(){this.searchUsers({me:this.me.id,query:this.query})},findChat:function(e){var s=this.conversations.find(function(s){return s.friends.user_one.id===e._id}),t=this.conversations.find(function(s){return s.friends.user_two.id===e._id});void 0!==s?this.getChat(s._id):void 0!==t?this.getChat(t._id):this.clearChat()}}),created:function(){this.chat(this.users[0])}},S()(V,"created",function(){this.getUsers(this.me.id)}),S()(V,"computed",j()({},Object(b.c)({me:"getMe",users:"getUsers",conversations:"getConversations"}))),V),H={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"users-container"},[t("div",{staticClass:"users-search-wrap"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"search-form",attrs:{placeholder:"Find friends",required:""},domProps:{value:e.query},on:{keyup:e.autoComplete,input:function(s){s.target.composing||(e.query=s.target.value)}}})]),e._v(" "),null!==e.users?t("div",{staticClass:"users-wrap"},e._l(e.users,function(s){return t("user",{key:s._id,attrs:{name:s.name,chat:e.chat.bind(this,s)}})})):e._e()])},staticRenderFns:[]};var D=t("VU/8")($,H,!1,function(e){t("ejN4")},null,null).exports,T=function(e){return e.me.authenticated},B=function(e){return e.me.data},L=function(e){return e.me.requests},W=t("mvHQ"),X=t.n(W);function Q(){return!!localStorage.getItem("user")}function K(){return JSON.parse(localStorage.getItem("user"))}function J(){if(Q())return K().data}function G(){return Q()?(p.a.defaults.headers.common.Authorization="Bearer "+K().token,v.a.resolve(!0)):v.a.resolve(!1)}var Z=function(e,s){var t=e.commit;return p.a.post("http://localhost:8000/api/signup",s).then(function(e){t("storeMe",e.data),window.location.replace("#/")})},Y=function(e,s){var t=e.commit;return p.a.post("http://localhost:8000/api/signin",s).then(function(e){t("storeMe",e.data),window.location.replace("#/")})},ee=function(e){var s=e.commit;s("clearMe"),s("clearChat"),s("clearConversations"),s("clearUsers"),window.location.replace("#/signin")},se=function(e){e.commit;return G(),p.a.get("http://localhost:8000/api/user/auth")},te=function(e,s){var t=e.commit;return p.a.get("http://localhost:8000/api/requests/"+s).then(function(e){t("storeRequests",e.data)})},ne=function(e,s){var t;e.me.authenticated=!0,e.me.data=s,t=s,Q()||localStorage.setItem("user",X()(t))},ae=function(e){e.me.authenticated=!1,e.me.data=null,localStorage.removeItem("user")},re=function(e,s){e.me.requests=s},ie={namespaced:!1,state:{me:{authenticated:!1,data:null,requests:null,unseenRequests:null}},getters:n,actions:a,mutations:r},oe=function(e){return e.users},ce=function(e){return e.user},ue=t("jIVf"),le=t.n(ue);le.a.logToConsole=!0;var de=new le.a("54831e065f39e90fe0e4",{cluster:"eu",encrypted:!1,authTransport:"ajax",authEndpoint:"http://localhost:8000/api/pusher/auth"}),me=function(e,s){var t=e.commit;return p.a.get("http://localhost:8000/api/users/"+s).then(function(e){return t("storeUsers",e.data),v.a.resolve(e)})},fe=function(e,s){var t=e.commit;return p.a.get("http://localhost:8000/api/user/"+s.user_one+"/"+s.user_two).then(function(e){return t("storeUser",e.data),v.a.resolve(e.data)})},ve=function(e,s){var t=e.commit;return p.a.post("http://localhost:8000/api/search",s).then(function(e){console.log(e.data),t("storeUsers",e.data)})},he=function(e,s){e.commit;var t=e.dispatch;return p.a.get("http://localhost:8000/api/send-request/"+s.user_one+"/"+s.user_two).then(function(e){t("getUser",s)})},pe=function(e,s){e.commit;var t=e.dispatch;return p.a.get("http://localhost:8000/api/accept-request/"+s.user_one+"/"+s.user_two).then(function(e){t("getUser",s),t("getRequests",s.user_one),de.subscribe("private-chat-"+e.data._id)})},ge=function(e,s){e.commit;return p.a.get("http://localhost:8000/api/unseen-requests/"+s)},_e=function(e,s){e.commit;return p.a.get("http://localhost:8000/api/mark-requests-as-seen/"+s)},Ce=function(e,s){e.users=s},we=function(e,s){e.user=s},je=function(e,s){e.users=null,e.user=null},be={state:{users:null,user:null},getters:i,actions:o,mutations:c},qe=function(e){return e.conversations},Ue=function(e){return e.chat},ye=function(e,s){var t=e.commit,n=e.dispatch;return p.a.get("http://localhost:8000/api/chat/conversations/"+s).then(function(e){return t("storeConversations",e.data),n("subscribe",e.data),n("bind",e.data),v.a.resolve()})},ke=function(e,s){var t=e.commit;return p.a.get("http://localhost:8000/api/chat/conversation/"+s).then(function(e){return t("storeChat",e.data),v.a.resolve(e.data)})},xe=function(e,s){e.commit;var t=e.dispatch;return p.a.post("http://localhost:8000/api/chat/send-message",s).then(function(e){return t("getConversations",J().id),v.a.resolve(e.data.message)})},Re=function(e,s){e.commit;return p.a.get("http://localhost:8000/api/mark-messages-as-seen/"+s).then(function(e){})},Me=function(e,s){e.commit;for(var t=0;t<s.length;t++)de.subscribe("private-chat-"+s[t]._id)},Ee=function(e,s){var t=e.commit,n=e.dispatch;de.bind("messages-event",function(e){t("addMessage",e),t("pushMessage",e),n("getConversations",J().id)})},Fe=function(e,s){e.conversations=s},Oe=function(e,s){e.unseenCount=s},Pe=function(e,s){var t=e.conversations.findIndex(function(e){return e._id===s.id});e.conversations[t].messages.push(s.message)},Ne=function(e,s){e.chat=s},Ae=function(e,s){e.chat._id===s.id&&(e.chat.messages.find(function(e){return e._id===s.message._id})||e.chat.messages.push(s.message))},ze=function(e){e.chat=null},Se=function(e){e.conversations=null},Ie={state:{conversations:null,chat:null,friend:null,friends:null},getters:u,actions:l,mutations:d};m.a.use(b.a);var Ve=new b.a.Store({modules:{auth:ie,users:be,chat:Ie}}),$e={name:"Send",data:function(){return{message:null}},methods:j()({},Object(b.b)({sendMessage:"sendMessage"}),{send:function(){this.message.length>0&&(console.log(this.friend),this.sendMessage({conversation_id:this.chat._id,sender:this.me,message:this.message}),this.message=null)}}),computed:j()({},Object(b.c)({chat:"getChat",me:"getMe"}))},He={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"send-container"},[t("form",{attrs:{method:"post"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"send-form",attrs:{placeholder:"Write new message",required:""},domProps:{value:e.message},on:{keydown:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key))return null;s.preventDefault(),s.stopPropagation(),e.send(s)},input:function(s){s.target.composing||(e.message=s.target.value)}}})])])},staticRenderFns:[]};var De=t("VU/8")($e,He,!1,function(e){t("uHCC")},null,null).exports,Te={name:"Userinfo",computed:j()({},Object(b.c)({user:"getUser",me:"getMe",requests:"getRequests"})),methods:j()({},Object(b.b)({getRequests:"getRequests",request:"sendRequest",accept:"acceptRequest"}),{sendRequest:function(e){this.request({user_one:this.me.id,user_two:e.user._id})},acceptRequest:function(e){this.accept({user_one:this.me.id,user_two:e.user._id})}})},Be={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"user-info-container"},[null!==e.user?t("div",[t("img",{staticClass:"user-info-img",attrs:{src:"https://www.shop5.ir/Template/Images/user-profile.png"}}),e._v(" "),null!==e.user?t("p",{staticClass:"user-info-name"},[e._v(e._s(e.user.user.name))]):e._e(),e._v(" "),this.user.chat.length||this.user.requestFromMe.length||this.user.requestForMe.length?this.user.requestFromMe.length?t("span",{staticClass:"request-sent"},[e._v("Request Was Sent"),t("i",{staticClass:"fas fa-check"})]):this.user.requestForMe.length?t("a",{staticClass:"friend-btn",on:{click:function(s){s.preventDefault(),e.acceptRequest(e.user)}}},[e._v("Accept Request")]):e._e():t("a",{staticClass:"friend-btn",on:{click:function(s){s.preventDefault(),e.sendRequest(e.user)}}},[e._v("Send Request")])]):e._e()])},staticRenderFns:[]};var Le=t("VU/8")(Te,Be,!1,function(e){t("QIYn")},null,null).exports,We=t("PJh5"),Xe=t.n(We),Qe=function(e){var s=Xe()(e).isSame(Xe()(),"week"),t=Xe()(e).isSame(Xe()(),"day");return s?Xe()(e).format("LT"):t?Xe()(e).format("dddd"):Xe()(e).format("L")},Ke={name:"Profile",data:function(){return{isActive:!0}},methods:j()({},Object(b.b)({getRequests:"getRequests",accept:"acceptRequest"}),{acceptRequest:function(e){this.accept({user_one:this.me.id,user_two:e.id})}}),computed:j()({},Object(b.c)({requests:"getRequests",me:"getMe"})),mounted:function(){this.getRequests(this.me.id)},created:function(){var e=this;O.$on("open-profile",function(s){e.isActive=!1,console.log(s)})}},Je={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"profile-container",class:{profile:e.isActive}},[n("img",{staticClass:"profile-img",attrs:{src:t("65UA")}}),e._v(" "),n("span",{staticClass:"profile-name"},[e._v(e._s(e.me.name))]),e._v(" "),n("span",{staticClass:"profile-email"},[e._v(e._s(e.me.email))]),e._v(" "),null!==e.requests?n("div",{staticClass:"profile-requests"},e._l(e.requests.forMe,function(s){return n("ul",[n("li",[n("span",{staticClass:"profile-request-name"},[e._v(e._s(s.friends.user_one.name))]),n("a",{staticClass:"friend-btn",on:{click:function(t){t.preventDefault(),e.acceptRequest(s.friends.user_one)}}},[e._v("Accept Request")])])])})):e._e()])},staticRenderFns:[]};var Ge=t("VU/8")(Ke,Je,!1,function(e){t("4yvC")},null,null).exports,Ze={name:"Message",props:["name","body","date","sender"],methods:{isIt:function(e){if(!function(e){return Ve.getters.getMe.id===e}(e))return{right:!0}}}},Ye={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"message-container"},[n("div",{staticClass:"message-wrap",class:e.isIt(e.sender)},[n("img",{staticClass:"message-img",attrs:{src:t("65UA")}}),e._v(" "),n("div",{staticClass:"message-body-wrap"},[n("p",{staticClass:"message-body"},[e._v(e._s(e.body))]),e._v(" "),n("p",{staticClass:"message-user"},[e._v(e._s(e.name)+" "),n("span",{staticClass:"message-date"},[e._v(e._s(e.date))])])])])])},staticRenderFns:[]};var es={name:"Messages",components:{Message:t("VU/8")(Ze,Ye,!1,function(e){t("Ib1g")},null,null).exports},computed:j()({},Object(b.c)({conversation:"getChat"})),updated:function(){null!==this.conversation&&(this.$refs.message.scrollTop=this.$refs.message.scrollHeight)},methods:j()({},Object(b.d)({addMessage:"addMessage"}),{createdAt:function(e){return Qe(e)}})},ss={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"messages-container",attrs:{id:"messages-container"}},[t("div",{ref:"message",staticClass:"messages-wrap"},[null!==e.conversation?t("div",e._l(e.conversation.messages,function(s){return t("message",{key:s._id,attrs:{body:s.body,name:s.sender.name,date:e.createdAt(s.createdAt),sender:s.sender.id}})})):e._e()])])},staticRenderFns:[]};var ts=t("VU/8")(es,ss,!1,function(e){t("9wNP")},null,null).exports,ns={name:"Conversation",props:["name","message","date","chat","date"],data:function(){return{current:null}},methods:{activeChat:function(e){return e===this.current}},created:function(){var e=this;O.$on("open-chat",function(s){e.current=s})}},as={render:function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"conversation-container",class:{active:e.activeChat(this.$vnode.key)}},[n("img",{staticClass:"conversation-img",attrs:{src:t("65UA")}}),e._v(" "),n("p",{staticClass:"conversation-user"},[e._v(e._s(e.name)+" "),n("span",{staticClass:"conversation-date"},[e._v(e._s(e.date))])]),e._v(" "),n("p",{staticClass:"conversation-message"},[e._v(e._s(e.message))]),e._v(" "),n("a",{staticClass:"conversation-link",attrs:{href:"#"},on:{click:e.chat}},[n("span",{staticClass:"conversation-link-span"})])])},staticRenderFns:[]};var rs={name:"Conversations",components:{Conversation:t("VU/8")(ns,as,!1,function(e){t("M83e")},null,null).exports},data:function(){return{chat_id:null}},mounted:function(){var e=this;this.getConversations(this.me.id).then(function(){e.conversations.length>0&&e.chat(e.conversations[0]._id)})},methods:j()({},Object(b.b)({getChat:"getChat",getConversations:"getConversations"}),{chat:function(e){this.getChat(e),O.$emit("open-chat",e),this.chat_id=e},updatedAt:function(e){return Qe(e)},friend:function(e){return function(e){var s=Ve.getters.getMe.id,t=Ve.getters.getConversations,n=t.findIndex(function(s){return s._id===e});return t[n].friends.user_one.id===s?t[n].friends.user_two.name:t[n].friends.user_one.name}(e)}}),computed:j()({},Object(b.c)({conversations:"getConversations",me:"getMe"}))},is={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"conversations-container"},[null!==e.conversations?t("div",{staticClass:"conversations-wrap"},e._l(e.conversations,function(s){return t("conversation",{key:s._id,attrs:{name:e.friend(s._id),message:s.messages[s.messages.length-1].body,chat:e.chat.bind(this,s._id),date:e.updatedAt(s.updatedAt)}})})):e._e()])},staticRenderFns:[]};var os={name:"Chat",components:{Conversations:t("VU/8")(rs,is,!1,function(e){t("wg7+")},null,null).exports,UserInfo:Le,Messages:ts,Profile:Ge,Users:D,Send:De,Me:A},data:function(){return{showConversations:!0,showUsers:!1,showProfile:!1}},methods:j()({},Object(b.b)({getConversations:"getConversations",getUnseenRequest:"unseenRequest",getUsers:"getUsers",markRequestAsSeen:"markRequestAsSeen"}),{switchConversations:function(){!1===this.showConversations&&(this.showUsers=!1,this.showConversations=!0,this.showProfile=!1)},switchUsers:function(){!1===this.showUsers&&(this.showConversations=!1,this.showUsers=!0,this.showProfile=!1)},switchProfile:function(){!1===this.showProfile&&(this.showConversations=!1,this.showUsers=!1,this.showProfile=!0,this.markRequestAsSeen(this.me.id),window.document.getElementById("request-icon").style.display="none")}}),computed:j()({},Object(b.c)({me:"getMe"}),{conversationsActive:function(){if(!0===this.showConversations)return{backgroundColor:"#EFF2F2",opacity:"0.9"}},usersActive:function(){if(!0===this.showUsers)return{backgroundColor:"#EFF2F2",opacity:"0.9"}},profileActive:function(){if(!0===this.showProfile)return{backgroundColor:"#EFF2F2",opacity:"0.9"}}}),mounted:function(){},created:function(){this.getUnseenRequest(this.me.id).then(function(e){e.data.length>0&&(window.document.getElementById("request-icon").style.display="block")}),de.subscribe("friendship-"+this.me.id);var e=this;de.bind("request",function(s){e.getUnseenRequest(s.friend_id).then(function(e){e.data.length>0&&(window.document.getElementById("request-icon").style.display="block")})}),de.bind("accepted-request",function(s){e.getConversations(e.me.id)}),this.getConversations(this.me.id)}},cs={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"chat-container"},[t("me"),e._v(" "),t("div",{staticClass:"left"},[t("div",{staticClass:"chat-switch-conversations",style:e.conversationsActive,on:{click:e.switchConversations}},[t("i",{staticClass:"far fa-comments fa-2x"})]),e._v(" "),t("div",{staticClass:"chat-switch-users",style:e.usersActive,on:{click:e.switchUsers}},[t("i",{staticClass:"fas fa-users fa-2x"})]),e._v(" "),t("div",{staticClass:"chat-switch-profile",style:e.profileActive,on:{click:e.switchProfile}},[t("i",{staticClass:"fas fa-ellipsis-v fa-2x"}),e._v(" "),t("i",{staticClass:"request-icon far fa-bell",attrs:{id:"request-icon"}})]),e._v(" "),e.showUsers?t("users"):e._e(),e._v(" "),e.showConversations?t("conversations"):e._e(),e._v(" "),e.showProfile?t("profile"):e._e()],1),e._v(" "),t("div",{staticClass:"right"},[t("user-info"),e._v(" "),t("messages"),e._v(" "),t("send")],1)],1)},staticRenderFns:[]};var us=t("VU/8")(os,cs,!1,function(e){t("6ocg")},null,null).exports,ls=function(e,s,t){Q()?t("/"):t()};m.a.use(C.a);var ds=new C.a({routes:[{path:"/",name:"chat",component:us,beforeEnter:function(e,s,t){!function(e,s,t){Q()?Ve.dispatch("authenticateUser").then(function(e){200===e.status?(Ve.commit("storeMe",J()),t()):t("signin")}).catch(function(){t("signin")}):t("signin")}(0,0,t)}},{path:"/signup",name:"signup",component:y,beforeEnter:function(e,s,t){ls(0,0,t)}},{path:"/signin",name:"signin",component:M,beforeEnter:function(e,s,t){ls(0,0,t)}},{path:"*",name:"notfound",component:F}]}),ms=t("sUu7"),fs={getMessage:function(e){return"Such "+e+" already exists."},validate:function(e){return!!e&&p.a.get("http://localhost:8000/api/unique/"+e).then(function(e){return{valid:e.data}})}};m.a.config.productionTip=!1,m.a.use(ms.a),ms.a.Validator.extend("unique",fs),new m.a({el:"#app",store:Ve,router:ds,components:{App:_},template:"<App/>"})},QIYn:function(e,s){},SZ0s:function(e,s){},TXCK:function(e,s){},"U+nL":function(e,s){},VAl4:function(e,s){},ejN4:function(e,s){},"sM6+":function(e,s){},uHCC:function(e,s){},uslO:function(e,s,t){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(e){return t(r(e))}function r(e){var s=n[e];if(!(s+1))throw new Error("Cannot find module '"+e+"'.");return s}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id="uslO"},"wg7+":function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.c7c463946e7ba2e283b0.js.map